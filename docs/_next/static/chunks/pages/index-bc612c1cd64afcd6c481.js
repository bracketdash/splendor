(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6832:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return S}});var r=s(7294),t=s(9008),o=s(5893);function a(e){return e.card?(0,o.jsxs)("div",{className:"card ".concat(e.card.bonus),children:[(0,o.jsxs)("div",{className:"card-banner",children:[(0,o.jsx)("div",{className:"card-points",children:e.card.points?"+".concat(e.card.points):""}),(0,o.jsx)("div",{className:e.card.level>2?"time-stone":"time-stone hide"}),Array(e.card.avengersTags).fill(1).map((function(e,n){return(0,o.jsx)("div",{className:"avengers-tag",children:"A"},n)}))]}),(0,o.jsx)("div",{className:"card-cost",children:Object.keys(e.card.cost).map((function(n,s){return(0,o.jsx)("div",{className:"cost-orb ".concat(n),children:e.card.cost[n]},s)}))}),(0,o.jsx)("div",{className:"card-name",children:e.card.name}),(0,o.jsx)("div",{className:"level-stars",children:" * ".repeat(e.card.level)})]}):(0,o.jsx)("div",{className:"card null-card"})}function l(e){return(0,o.jsx)("div",{className:"token ".concat(e.color),children:e.num})}function i(e){return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{children:e.gameState.gameOver?"GAME OVER":"Round ".concat(e.gameState.round," - ").concat(e.gameState.players[e.gameState.whoseTurn].name,"'s turn")}),(0,o.jsx)("div",{className:"tiles-container",children:(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"tile",children:[(0,o.jsx)("div",{className:"tile-name",children:"Avengers Tile"}),(0,o.jsx)("div",{className:"tile-points",children:"+3"}),(0,o.jsx)("div",{className:"tile-cost",children:(0,o.jsx)("div",{className:"tile-bonus-cost",children:"3+"})}),(0,o.jsx)("div",{className:"tile-owner",children:e.gameState.avengersTileOwner?e.gameState.avengersTileOwner.name:"Not Yet Owned"})]})})}),(0,o.jsx)("div",{className:"tiles-container",children:e.gameState.locations.map((function(e,n){e.owner;return(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"tile",children:[(0,o.jsx)("div",{className:"tile-name",children:e.name}),(0,o.jsx)("div",{className:"tile-points",children:"+3"}),(0,o.jsx)("div",{className:"tile-cost",children:Object.keys(e.cost).map((function(n,s){return(0,o.jsx)("div",{className:"tile-bonus-cost ".concat(n),children:e.cost[n]},s)}))}),(0,o.jsx)("div",{className:"tile-owner",children:e.owner?e.owner.name:"Not Yet Owned"})]})},n)}))}),[3,2,1].map((function(n){return(0,o.jsx)("div",{className:"level-row",children:e.gameState.freeAgents[n-1].map((function(e,n){return(0,o.jsx)(a,{card:e},n)}))},n)})),(0,o.jsx)("div",{className:"the-bank",children:Object.keys(e.gameState.bankChips).map((function(n,s){return(0,o.jsx)(l,{color:n,num:e.gameState.bankChips[n]},s)}))})]})}function u(e){return(0,o.jsxs)("div",{className:e.gameState.players[e.gameState.whoseTurn]!==e.player||e.gameState.gameOver?"player-area-container":"player-area-container active-player",children:[(0,o.jsxs)("h2",{children:[e.player.name," - ",e.player.points," Points"]}),Object.keys(e.player.tokens).map((function(n,s){return(0,o.jsx)(l,{color:n,num:e.player.tokens[n]},s)})),e.player.recruits.length>0?(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{children:"Recruits"}),(0,o.jsx)("div",{className:"cards-container",children:e.player.recruits.map((function(e,n){return(0,o.jsx)(a,{card:e},n)}))})]}):"",e.player.reserves.length>0?(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{children:"Reserves"}),(0,o.jsx)("div",{className:"cards-container",children:e.player.reserves.map((function(e,n){return(0,o.jsx)(a,{card:e},n)}))})]}):"",e.gameState.players[e.gameState.whoseTurn]!==e.player||e.gameState.gameOver?"":(0,o.jsx)("h2",{children:"Select A Move"}),e.gameState.players[e.gameState.whoseTurn]===e.player?(0,o.jsx)("div",{className:"option-columns",children:Object.keys(e.gameState.options).map((function(n){return e.gameState.options[n].length?(0,o.jsxs)("div",{className:"option-column",children:[(0,o.jsx)("h3",{children:"chips"===n?"Take Chips":"".concat(n.substring(0,1).toUpperCase()).concat(n.substring(1))}),e.gameState.options[n].map((function(n,s){return(0,o.jsxs)("button",{className:n.tokens?"has-tokens":"",onClick:function(){return e.onMove(n,e.player)},children:[(0,o.jsxs)("div",{className:"action",children:[n.tokens?n.tokens.map((function(e,n){return(0,o.jsx)("span",{className:"option-token ".concat(e)},n)})):"","recruit"===n.type||"reserve"===n.type?"".concat(n.type.substring(0,1).toUpperCase()).concat(n.type.substring(1)," ").concat(("reserves"===n.level?e.player.reserves[n.index]:e.gameState.freeAgents[n.level-1][n.index]).name):"",n.location?" + ".concat(n.location.name):"",n.tokensToRemove?n.tokensToRemove.map((function(e,n){return(0,o.jsx)("span",{className:"option-token ".concat(e)},n)})):""]}),(0,o.jsx)("div",{className:"ai-score",children:n.score.toFixed(2)})]},s)}))]},n):(0,o.jsx)("div",{},n)}))}):""]})}function c(e){return e.game&&e.gameState?(0,o.jsxs)("div",{children:[(0,o.jsx)(i,{gameState:e.gameState}),e.gameState.players.map((function(n,s){return(0,o.jsx)(u,{gameState:e.gameState,player:n,onMove:e.onMakeMove},s)}))]}):(0,o.jsx)("div",{})}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var s=0,r=new Array(n);s<n;s++)r[s]=e[s];return r}function g(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"===typeof e)return p(e,n);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?p(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var n=(0,r.useState)([{name:"Player 1",computer:!1},{name:"Player 2",computer:!1},{name:"Player 3",computer:!1,sittingOut:!0},{name:"Player 4",computer:!1,sittingOut:!0}]),s=n[0],t=n[1];function a(e,n){t((function(s){return s[e].name=n,g(s)}))}function l(e,n){t((function(s){return s[e].computer=n,g(s)}))}return(0,o.jsxs)("div",{className:"player-config-container",children:[(0,o.jsx)("h2",{children:"Configure Players"}),s.map((function(e,n){return n<2?(0,o.jsxs)("div",{className:"player-config-row",children:[(0,o.jsx)("input",{type:"text",defaultValue:e.name,onChange:function(e){return a(n,e.target.value)}}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",defaultChecked:e.computer,onChange:function(e){return l(n,e.target.checked)}}),(0,o.jsx)("span",{children:"Computer"})]})]},n):(0,o.jsxs)("div",{className:e.sittingOut?"player-config-row sitting-out":"player-config-row",children:[(0,o.jsx)("input",{type:"text",defaultValue:e.name,onChange:function(e){return a(n,e.target.value)}}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",defaultChecked:e.computer,onChange:function(e){return l(n,e.target.checked)}}),(0,o.jsx)("span",{children:"Computer"})]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",defaultChecked:e.sittingOut,onChange:function(e){return function(e,n){t((function(s){return s[e].sittingOut=n,g(s)}))}(n,e.target.checked)}}),(0,o.jsx)("span",{children:"Sitting out"})]})]},n)})),(0,o.jsx)("button",{onClick:function(){e.onStartGame(s)},children:"Start Game"})]})}function m(e,n){for(var s=0;s<n.length;s++){var r=n[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=[{avengersTags:0,bonus:"blue",cost:{yellow:4},points:1,level:1,name:"Taskmaster"},{avengersTags:1,bonus:"blue",cost:{yellow:2,blue:1,orange:2},points:0,level:1,name:"Wasp"},{avengersTags:1,bonus:"blue",cost:{yellow:3,orange:1,purple:1},points:0,level:1,name:"Valkyrie"},{avengersTags:0,bonus:"blue",cost:{yellow:2,purple:2},points:0,level:1,name:"Elektra"},{avengersTags:0,bonus:"blue",cost:{blue:1,orange:1,red:2,purple:1},points:0,level:1,name:"Bullseye"},{avengersTags:0,bonus:"blue",cost:{yellow:3},points:0,level:1,name:"Moon Knight"},{avengersTags:0,bonus:"blue",cost:{yellow:2,red:1},points:0,level:1,name:"Spider-Man 2099"},{avengersTags:0,bonus:"blue",cost:{yellow:1,blue:1,orange:1,purple:1},points:0,level:1,name:"Lockjaw"},{avengersTags:0,bonus:"orange",cost:{purple:4},points:1,level:1,name:"Yondu"},{avengersTags:1,bonus:"orange",cost:{blue:1,red:1,purple:3},points:0,level:1,name:"Kate Bishop"},{avengersTags:1,bonus:"orange",cost:{yellow:1,blue:2,purple:2},points:0,level:1,name:"Hawkeye"},{avengersTags:0,bonus:"orange",cost:{blue:1,orange:1,red:1,purple:2},points:0,level:1,name:"Scarlet Spider"},{avengersTags:0,bonus:"orange",cost:{yellow:1,purple:2},points:0,level:1,name:"Spider-Ham"},{avengersTags:0,bonus:"orange",cost:{purple:3},points:0,level:1,name:"Silver Sable"},{avengersTags:0,bonus:"orange",cost:{yellow:1,blue:1,orange:1,purple:1},points:0,level:1,name:"Spider-Girl"},{avengersTags:0,bonus:"orange",cost:{yellow:1,purple:2},points:0,level:1,name:"Kingpin"},{avengersTags:0,bonus:"purple",cost:{blue:4},points:1,level:1,name:"Scorpion"},{avengersTags:1,bonus:"purple",cost:{blue:2,orange:1,red:2},points:0,level:1,name:"Winter Soldier"},{avengersTags:1,bonus:"purple",cost:{yellow:1,blue:3,red:1},points:0,level:1,name:"America Chavez"},{avengersTags:0,bonus:"purple",cost:{yellow:2,blue:2},points:0,level:1,name:"Gorgon"},{avengersTags:0,bonus:"purple",cost:{blue:3},points:0,level:1,name:"Kraven"},{avengersTags:0,bonus:"purple",cost:{blue:2,purple:1},points:0,level:1,name:"Lizard"},{avengersTags:0,bonus:"purple",cost:{blue:2,orange:1,red:1,purple:1},points:0,level:1,name:"Abomination"},{avengersTags:0,bonus:"purple",cost:{yellow:1,blue:1,orange:1,purple:1},points:0,level:1,name:"Rhino"},{avengersTags:0,bonus:"red",cost:{orange:4},points:1,level:1,name:"Sandman"},{avengersTags:1,bonus:"red",cost:{yellow:2,orange:2,red:1},points:0,level:1,name:"Ms. Marvel"},{avengersTags:1,bonus:"red",cost:{blue:1,orange:3,purple:1},points:0,level:1,name:"Quake"},{avengersTags:0,bonus:"red",cost:{yellow:1,blue:1,orange:1,red:1},points:0,level:1,name:"Triton"},{avengersTags:0,bonus:"red",cost:{orange:2,purple:2},points:0,level:1,name:"Crystal"},{avengersTags:0,bonus:"red",cost:{yellow:1,blue:1,orange:2,red:1},points:0,level:1,name:"Wong"},{avengersTags:0,bonus:"red",cost:{orange:3},points:0,level:1,name:"Mysterio"},{avengersTags:0,bonus:"red",cost:{orange:2,red:1},points:0,level:1,name:"Electro"},{avengersTags:0,bonus:"yellow",cost:{red:4},points:1,level:1,name:"Vulture"},{avengersTags:1,bonus:"yellow",cost:{yellow:1,blue:1,red:3},points:0,level:1,name:"Spider-Woman"},{avengersTags:1,bonus:"yellow",cost:{orange:1,red:2,purple:2},points:0,level:1,name:"Squirrel Girl"},{avengersTags:0,bonus:"yellow",cost:{blue:1,orange:1,red:2,purple:1},points:0,level:1,name:"Prowler"},{avengersTags:0,bonus:"yellow",cost:{orange:2,red:2},points:0,level:1,name:"M.O.D.O.K."},{avengersTags:0,bonus:"yellow",cost:{yellow:1,red:2},points:0,level:1,name:"Rocket"},{avengersTags:0,bonus:"yellow",cost:{red:3},points:0,level:1,name:"Baron Zemo"},{avengersTags:0,bonus:"yellow",cost:{yellow:1,blue:1,red:1,purple:1},points:0,level:1,name:"Grandmaster"},{avengersTags:0,bonus:"blue",cost:{purple:6},points:3,level:2,name:"Nebula"},{avengersTags:0,bonus:"blue",cost:{red:3,purple:5},points:2,level:2,name:"Black Cat"},{avengersTags:0,bonus:"blue",cost:{blue:2,orange:1,purple:4},points:2,level:2,name:"Ghost-Spider"},{avengersTags:0,bonus:"blue",cost:{purple:5},points:2,level:2,name:"Miles Morales"},{avengersTags:1,bonus:"blue",cost:{blue:2,orange:2,purple:3},points:1,level:2,name:"War Machine"},{avengersTags:1,bonus:"blue",cost:{yellow:2,red:3,purple:3},points:1,level:2,name:"Quicksilver"},{avengersTags:0,bonus:"orange",cost:{red:6},points:3,level:2,name:"Daredevil"},{avengersTags:0,bonus:"orange",cost:{red:5},points:2,level:2,name:"Punisher"},{avengersTags:0,bonus:"orange",cost:{purple:3,red:5},points:2,level:2,name:"Groot"},{avengersTags:0,bonus:"orange",cost:{blue:1,orange:2,red:4},points:2,level:2,name:"Star-Lord"},{avengersTags:1,bonus:"orange",cost:{yellow:3,red:3,purple:2},points:1,level:2,name:"Falcon"},{avengersTags:1,bonus:"orange",cost:{orange:2,red:3,purple:2},points:1,level:2,name:"Nick Fury"},{avengersTags:0,bonus:"purple",cost:{yellow:6},points:3,level:2,name:"Jessica Jones"},{avengersTags:0,bonus:"purple",cost:{yellow:5},points:2,level:2,name:"Ronan"},{avengersTags:0,bonus:"purple",cost:{yellow:5,red:3},points:2,level:2,name:"Carnage"},{avengersTags:0,bonus:"purple",cost:{yellow:4,blue:2,orange:1},points:2,level:2,name:"Crossbones"},{avengersTags:1,bonus:"purple",cost:{yellow:3,orange:2,purple:2},points:1,level:2,name:"She-Hulk"},{avengersTags:1,bonus:"purple",cost:{yellow:3,blue:2,purple:3},points:1,level:2,name:"Okoye"},{avengersTags:0,bonus:"red",cost:{blue:6},points:3,level:2,name:"Hela"},{avengersTags:0,bonus:"red",cost:{blue:5},points:2,level:2,name:"Venom"},{avengersTags:0,bonus:"red",cost:{orange:3,blue:5},points:2,level:2,name:"Medusa"},{avengersTags:0,bonus:"red",cost:{yellow:2,blue:4,purple:1},points:2,level:2,name:"Ghost Rider"},{avengersTags:1,bonus:"red",cost:{yellow:2,blue:3,red:2},points:1,level:2,name:"Scarlet Witch"},{avengersTags:1,bonus:"red",cost:{blue:3,orange:2,red:3},points:1,level:2,name:"Beta Ray Bill"},{avengersTags:0,bonus:"yellow",cost:{orange:6},points:3,level:2,name:"Red Skull"},{avengersTags:0,bonus:"yellow",cost:{orange:5},points:2,level:2,name:"The Collector"},{avengersTags:0,bonus:"yellow",cost:{yellow:3,orange:5},points:2,level:2,name:"Karnak"},{avengersTags:0,bonus:"yellow",cost:{blue:2,orange:4,red:1},points:2,level:2,name:"Maximus"},{avengersTags:1,bonus:"yellow",cost:{blue:2,orange:3,purple:2},points:1,level:2,name:"Maria Hill"},{avengersTags:1,bonus:"yellow",cost:{yellow:3,blue:2,orange:3},points:1,level:2,name:"Shuri"},{avengersTags:0,bonus:"blue",cost:{orange:3,red:7},points:5,level:3,name:"Gamora"},{avengersTags:1,bonus:"blue",cost:{yellow:3,orange:3,red:6},points:4,level:3,name:"Ant-Man"},{avengersTags:0,bonus:"blue",cost:{red:7},points:4,level:3,name:"Iron Fist"},{avengersTags:2,bonus:"blue",cost:{yellow:3,blue:3,red:5,purple:3},points:3,level:3,name:"Black Widow"},{avengersTags:0,bonus:"orange",cost:{yellow:7,red:3},points:5,level:3,name:"Spider-Man"},{avengersTags:1,bonus:"orange",cost:{yellow:6,orange:3,purple:3},points:4,level:3,name:"Black Panther"},{avengersTags:0,bonus:"orange",cost:{yellow:7},points:4,level:3,name:"Black Bolt"},{avengersTags:2,bonus:"orange",cost:{yellow:5,blue:3,orange:3,purple:3},points:3,level:3,name:"Captain America"},{avengersTags:0,bonus:"purple",cost:{yellow:3,orange:7},points:5,level:3,name:"Luke Cage"},{avengersTags:1,bonus:"purple",cost:{blue:3,orange:6,purple:3},points:4,level:3,name:"Captain Marvel"},{avengersTags:0,bonus:"purple",cost:{orange:7},points:4,level:3,name:"Drax"},{avengersTags:2,bonus:"purple",cost:{blue:3,orange:5,red:3,purple:3},points:3,level:3,name:"Hulk"},{avengersTags:0,bonus:"red",cost:{blue:3,purple:7},points:5,level:3,name:"Loki"},{avengersTags:1,bonus:"red",cost:{red:3,orange:3,purple:6},points:4,level:3,name:"Nova"},{avengersTags:0,bonus:"red",cost:{purple:7},points:4,level:3,name:"Doctor Strange"},{avengersTags:2,bonus:"red",cost:{yellow:3,blue:3,red:3,purple:5},points:3,level:3,name:"Hulk"},{avengersTags:0,bonus:"yellow",cost:{blue:7,purple:3},points:5,level:3,name:"Green Goblin"},{avengersTags:1,bonus:"yellow",cost:{yellow:3,blue:6,red:3},points:4,level:3,name:"Vision"},{avengersTags:0,bonus:"yellow",cost:{blue:7},points:4,level:3,name:"Doctor Octopus"},{avengersTags:2,bonus:"yellow",cost:{yellow:3,blue:5,orange:3,red:3},points:3,level:3,name:"Iron Man"}],h=[{cost:{blue:4,yellow:4},name:"Avengers Tower, NYC"},{cost:{purple:4,red:4},name:"Attilan"},{cost:{orange:4,yellow:4},name:"Hell's Kitchen, NYC"},{cost:{orange:4,purple:4},name:"Triskelion"},{cost:{orange:4,yellow:4},name:"Hell's Kitchen, NYC"},{cost:{blue:4,red:4},name:"Wakanda"},{cost:{orange:3,purple:3,yellow:3},name:"Asgard"},{cost:{blue:3,red:3,yellow:3},name:"Knowhere"},{cost:{blue:3,purple:3,red:3},name:"Atlantis"}];function f(e,n){return Object.assign(Object.keys(e.tokens).reduce((function(e,n){return e[n]=0,e}),{}),(n||e.recruits).reduce((function(e,n){var s=n.bonus;return e[s]?e[s]++:e[s]=1,e}),{}))}function b(e,n,s){var r=s?s.gray:e.tokens.gray;return!Object.keys(n).some((function(t){if(s)return n[t]>s[t]&&(!(r>=n[t]-s[t])||(r-=n[t]-s[t],!1));var o=f(e)[t]||0;return n[t]>e.tokens[t]+o&&(!(r>=n[t]-(e.tokens[t]+o))||(r-=n[t]-(e.tokens[t]+o),!1))}))}function y(e){var n=e.afterBonuses,s=e.afterState,r=e.card,t=e.currentBonuses,o=e.player,a=0,l=0;return Object.keys(r.cost).forEach((function(e){var i=n[e],u=r.cost[e]-i,c=t[e],p=r.cost[e]-c;if(a+=Math.min(i,r.cost[e]),u>0){var g=Math.min(s.tokens[e],u);a+=g,r.cost[e]-(Math.min(i,r.cost[e])+g)>0&&(a+=Math.min(r.cost[e]-(Math.min(i,r.cost[e])+g),s.tokens.gray))}if(l+=Math.min(c,r.cost[e]),p>0){var v=Math.min(o.tokens[e],p);l+=v,r.cost[e]-(Math.min(c,r.cost[e])+v)>0&&(l+=Math.min(r.cost[e]-(Math.min(c,r.cost[e])+v),o.tokens.gray))}})),a-l}var T=["blue","orange","purple","red","yellow"];function k(e){return Array(e).fill(null)}function w(e){return e.reduce((function(e,n){return e+n.avengersTags}),0)}function j(e){return e.sort((function(){return Math.random()>.5?1:-1}))}var x=function(){function e(n){var s=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var r=[null,null,4,5,7],t=j(g(h));this.avengersTileOwner=null,this.decks=[],this.freeAgents=[],k(3).forEach((function(e,n){s.decks.push(j(g(d).filter((function(e){return e.level===n+1})))),s.freeAgents.push(k(4).map((function(){return s.decks[n].pop()})))})),this.locations=k(n.length).map((function(){return t.pop()})),this.players=n.map((function(e){var n=e.computer,s=e.name,r=e.weights;return{computer:n,name:s,recruits:[],reserves:[],tokens:[].concat(T,["gray"]).reduce((function(e,n){return e[n]=0,e}),{}),weights:r}})),this.round=1,this.whoseTurn=0,this.bankChips=T.reduce((function(e,s){return e[s]=r[n.length],e}),{}),this.bankChips.gray=5}var n,s,r;return n=e,(s=[{key:"getOptions",value:function(){var e=this,n=[],s=this.players[this.whoseTurn],r=f(s),t=Object.values(s.tokens).reduce((function(e,n){return e+n}),0);if(t<10){var o=function s(r,o,a){if(0!==r)for(var l=0;l<o.length;l++)s(r-1,o.slice(l+1),a.concat([o[l]]));else if(a.length&&t<11-a.length){var i=!0;a.reduce((function(e,n){return e[n]--,e[n]<0&&(i=!1),e}),Object.assign({},e.bankChips)),i&&n.push({type:"3diff",tokens:a})}};k(3).forEach((function(e,n){o(n+1,T,[])})),Object.keys(this.bankChips).forEach((function(s){"gray"!==s&&e.bankChips[s]>3&&t<9&&n.push({type:"2same",tokens:[s,s]})})),n.sort((function(e,n){return e.tokens.length>n.tokens.length?-1:1}))}return this.freeAgents.forEach((function(t,o){t.forEach((function(t,a){if(null!==t){var l=t.cost;if(s.reserves.length<3){var i={type:"reserve",level:o+1,index:a};e.bankChips.gray>0&&(i.tokens=["gray"]),n.push(i)}if(b(s,l)){var u=Object.keys(l).reduce((function(e,n){var t=l[n]-r[n];if(t>0)if(t<=s.tokens[n])k(t).forEach((function(){e.push(n)}));else{var o=t-s.tokens[n];k(o).forEach((function(){e.push("gray")})),k(t-o).forEach((function(){e.push(n)}))}return e}),[]);n.push({type:"recruit",level:o+1,index:a,tokensToRemove:u})}}}))})),s.reserves.forEach((function(e,t){var o=e.cost;if(b(s,o)){var a=Object.keys(o).reduce((function(e,n){var t=o[n]-r[n];if(t>0)if(t<=s.tokens[n])k(t).forEach((function(){e.push(n)}));else{var a=t-s.tokens[n];k(a).forEach((function(){e.push("gray")})),k(t-a).forEach((function(){e.push(n)}))}return e}),[]);n.push({type:"recruit",level:"reserves",index:t,tokensToRemove:a})}})),n.length?n.map((function(n){return n.score=e.getOptionScore(s,n),n})):[{type:"skip"}]}},{key:"getOptionScore",value:function(e,n){var s=this,r={recruits:g(e.recruits),tokens:Object.assign({},e.tokens)};if("recruit"===n.type?("reserves"===n.level?r.recruits.push(e.reserves[n.index]):r.recruits.push(this.freeAgents[n.level-1][n.index]),n.tokensToRemove&&n.tokensToRemove.length&&n.tokensToRemove.forEach((function(e){r.tokens[e]--}))):n.tokens&&n.tokens.forEach((function(e){r.tokens[e]++})),this.meetsWinCriteria(e))return 9999;var t=r.recruits.reduce((function(e,n){return e+n.points}),0)-e.recruits.reduce((function(e,n){return e+n.points}),0);this.avengersTileOwner!==e&&(this.avengersTileOwner?w(r.recruits)>w(this.avengersTileOwner.recruits)&&(t+=3):w(r.recruits)>2&&(t+=3));var o=Object.assign({},r.tokens,f(e,r.recruits));this.locations.filter((function(e){return!e.owner})).forEach((function(n){b(e,n.cost,o)&&(t+=1)})),e.recruits.some((function(e){return e.bonus===r.recruits[r.recruits.length-1].bonus}))||(t+=3);var a=f(e,r.recruits),l=f(e);if(!e.recruits.some((function(e){return 3===e.level})))if(r.recruits.some((function(e){return 3===e.level})))t+=5;else{var i=0;this.freeAgents[2].forEach((function(n){n&&(i+=y({afterBonuses:a,afterState:r,card:n,currentBonuses:l,player:e})/Object.values(n.cost).reduce((function(e,n){return e+n}),0))})),i>0&&(t+=6*i)}var u=0;return this.freeAgents.forEach((function(t,i){t.forEach((function(t,c){if(t&&(i!==n.level-1||c!==n.index)){var p=t.points+t.avengersTags;r.recruits.some((function(e){return t.bonus===e.bonus}))||(p+=3),3!==t.level||r.recruits.some((function(e){return 3===e.level}))||(p+=5);var g=Object.assign({},o);if(g[t.bonus]+=1,s.locations.filter((function(e){return!e.owner})).forEach((function(n){b(e,n.cost,g)&&(p+=1)})),!b(e,t.cost)&&b(e,t.cost,g))u+=p;else{var v=y({afterBonuses:a,afterState:r,card:t,currentBonuses:l,player:e})/Object.values(t.cost).reduce((function(e,n){return e+n}),0);v>0&&(u+=p*v)}}}))})),t+=u,"recruit"===n.type?t*=e.weights?e.weights[0]:13.9:"reserve"===n.type&&(t*=1/(e.weights?e.weights[1]:3.34)),t}},{key:"getPoints",value:function(e){var n=e.recruits.reduce((function(e,n){return e+n.points}),0);return e===this.avengersTileOwner&&(n+=3),this.locations.forEach((function(s){e===s.owner&&(n+=3)})),n}},{key:"getState",value:function(e,n){var s=this,r=this.players.map((function(e){return e.points=s.getPoints(e),e})),t={avengersTileOwner:this.avengersTileOwner,bankChips:this.bankChips,decks:this.decks,freeAgents:this.freeAgents,locations:this.locations,options:{},players:r,round:this.round,whoseTurn:this.whoseTurn};return e||(t.options=this.getOptions(),n||(t.options=t.options.reduce((function(e,n){return e["3diff"===n.type||"2same"===n.type?"chips":n.type].push(n),e}),{chips:[],recruit:[],reserve:[]}))),t}},{key:"makeMove",value:function(e,n){var s=this,r=this.players[this.whoseTurn],t=e.level&&"number"===typeof e.level?e.level-1:e.level?e.level:null;if("recruit"===e.type?"reserves"===t?(r.recruits.push(r.reserves[e.index]),r.reserves.splice(e.index,1)):(r.recruits.push(this.freeAgents[t][e.index]),this.decks[t].length?this.freeAgents[t][e.index]=this.decks[t].pop():this.freeAgents[t][e.index]=null):"reserve"===e.type&&(r.reserves.push(this.freeAgents[t][e.index]),this.decks[t].length?this.freeAgents[t][e.index]=this.decks[t].pop():this.freeAgents[t][e.index]=null),e.tokens&&e.tokens.length&&e.tokens.forEach((function(e){s.bankChips[e]--,r.tokens[e]++})),e.tokensToRemove&&e.tokensToRemove.length&&e.tokensToRemove.forEach((function(e){r.tokens[e]--,s.bankChips[e]++})),w(r.recruits)>2){var o=this.players.map((function(e){return{p:e,tags:w(e.recruits)}})).filter((function(e){return e.tags>2})).sort((function(e,n){return e.tags>n.tags?-1:1}));o.length>1&&o[0]>o[1]?this.avengersTileOwner=o[0].p:this.avengersTileOwner=r}return this.locations.forEach((function(e){!e.owner&&b(r,e.cost,f(r))&&(e.owner=r)})),this.meetsWinCriteria(r)?new Promise((function(e){var n=s.getState(!0);n.gameOver=!0,e(n)})):(this.whoseTurn++,this.whoseTurn>this.players.length-1&&(this.round++,this.whoseTurn=0),new Promise((function(e){e(s.getState(!1,n))})))}},{key:"meetsWinCriteria",value:function(e){return e.meetsWinCriteria=this.getPoints(e)>15&&T.every((function(n){return!!e.recruits.filter((function(e){return e.bonus===n})).length}))&&e.recruits.some((function(e){return 3===e.level})),e.meetsWinCriteria}}])&&m(n.prototype,s),r&&m(n,r),e}();function S(){var e=(0,r.useState)(!0),n=e[0],s=e[1],a=(0,r.useState)(null),l=a[0],i=a[1],u=(0,r.useState)(null),p=u[0],g=u[1];function m(e,n,s){(s||l).makeMove(e).then((function(e){if(e.gameOver)g(e);else{var n=e.players[e.whoseTurn];n.computer?m(Object.keys(e.options).reduce((function(n,s){return n.concat(e.options[s])}),[]).sort((function(e,n){return e.score>n.score?-1:1}))[0],n,s):g(e)}}))}return(0,o.jsxs)("div",{children:[(0,o.jsx)(t.default,{children:(0,o.jsx)("title",{children:"Splendor MARVEL"})}),(0,o.jsxs)("main",{children:[(0,o.jsx)("h1",{children:"Splendor MARVEL"}),(0,o.jsx)("section",{className:n?"":"hide",children:(0,o.jsx)(v,{onStartGame:function(e){var n=e.filter((function(e){return!e.sittingOut})),r=new x(n),t=r.getState();s(!1),i(r),g(t),n[0].computer&&m(Object.keys(t.options).reduce((function(e,n){return e.concat(t.options[n])}),[]).sort((function(e,n){return e.score>n.score?-1:1}))[0],n[0],r)}})}),(0,o.jsx)("section",{className:n?"hide":"",children:(0,o.jsx)(c,{game:l,gameState:p,onMakeMove:m,onSetGameState:g})})]})]})}},8581:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(6832)}])},9008:function(e,n,s){e.exports=s(639)}},function(e){e.O(0,[774,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);